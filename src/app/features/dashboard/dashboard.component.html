<div class="container py-4">
  <!-- Welcome -->
  <div class="text-center mb-3">
    <h1 class="h1">
      Welcome back,
      {{ currentUser?.firstName || "there" }}!
      <i class="fas fa-hand-wave"></i>
    </h1>
    <p class="text-muted">Here's your nutrition overview for today</p>
  </div>
  <!-- Quick Stats -->
  <div class="row g-4">
    <div *ngFor="let card of getNutritionCards()" class="col-lg-2 col-md-6">
      <app-nutrition-card
        [data]="card"
        [decimals]="card.label === 'Calories' ? '1.0-0' : '1.1-1'"
        [showShadow]="true"
        [size]="'medium'"
      >
      </app-nutrition-card>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="text-center my-3 mt-4">
    <h2 class="mb-4 h2">Quick Actions</h2>
    <div class="row gx-4 gy-3 justify-content-center">
      <div *ngFor="let a of navs" class="col-sm-6 col-md-3">
        <a
          [routerLink]="a.path"
          class="card h-100 text-decoration-none shadow-sm"
        >
          <div class="card-body text-center">
            <i class="fas fa-{{ a.icon }} fa-2x mb-3 text-primary"></i>
            <h5>{{ a.title }}</h5>
            <p class="small text-muted">{{ a.desc }}</p>
          </div>
        </a>
      </div>
    </div>
  </div>

  <!-- Recent Food Entries -->
  <div *ngIf="todaysFoodEntries.length" class="card mb-4 shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Today's Food Entries</h5>
      <a class="text-decoration-none" routerLink="/food">View All</a>
    </div>
    <div class="list-group list-group-flush">
      <div
        *ngFor="let entry of todaysFoodEntries.slice(0, 5)"
        class="list-group-item d-flex align-items-center"
      >
        <img
          (error)="onImageError($event)"
          *ngIf="entry.imageUrl"
          [src]="entry.imageUrl"
          class="rounded me-3"
          width="48"
        />
        <div
          *ngIf="!entry.imageUrl"
          class="rounded-circle me-3 d-flex align-items-center justify-content-center"
          style="width: 48px; height: 48px"
        >
          <i class="fas fa-utensils text-muted"></i>
        </div>
        <div class="flex-fill">
          <h6 class="mb-1">{{ entry.foodName }}</h6>
          <p *ngIf="entry.brand" class="mb-1 small text-muted">
            {{ entry.brand }}
          </p>
          <small class="text-muted"
          >{{ entry.gramsConsumed | number: "1.0-1" }}g consumed</small
          >
        </div>
        <div>
          <span class="fw-bold">{{ entry.calories | number: "1.0-0" }}</span>
          cal
        </div>
      </div>
    </div>
  </div>

  <!-- Empty -->
  <div *ngIf="!isLoading && !todaysFoodEntries.length" class="text-center py-5">
    <i class="fas fa-utensils fa-3x text-muted"></i>
    <h4 class="mt-3">No food entries yet today</h4>
    <p>Start tracking your nutrition by adding your first meal!</p>
    <a class="btn btn-primary" routerLink="/food/search">Add Your First Meal</a>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="text-center py-5">
    <app-loading-spinner size="large"></app-loading-spinner>
    <p class="mt-3">Loading your dashboardâ€¦</p>
  </div>
</div>
